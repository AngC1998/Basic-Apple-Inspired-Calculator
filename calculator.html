<!DOCTYPE HTML>
<head>
    <link rel = "stylesheet" href = "calculator.css">
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <!--<script src = "calculator.js"></script>-->
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
    <div class = "container">
        <div class = "item item-header" id = "currentValue">0</div>
    
        <button class = "btn silver clear">AC</button>
        <button class = "btn silver">+/-</button>
        <button class = "btn silver">%</button>
        <button class = "btn orange divide">/</button>
    
        <button class = "btn num">7</button>
        <button class = "btn num">8</button>
        <button class = "btn num">9</button>
        <button class = "btn orange multiply">X</button>
    
        <button class = "btn num">4</button>
        <button class = "btn num">5</button>
        <button class = "btn num">6</button>
        <button class = "btn orange subtract">-</button>
    
        <button class = "btn num">1</button>
        <button class = "btn num">2</button>
        <button class = "btn num">3</button>
        <button class = "btn orange add">+</button>
    
        <button class = "btn num zero">0</button>
        <button class = "btn">.</button>
        <button class = "btn equals">=</button>
        
        <script>
            var globalAnswer = "0";
            function removeLeadingZero(string) {
                var newString = string; 
                if(newString[0] === '0') {
                    newString = newString.slice(1);
                }
                return newString; 
            }
            function removeLeadingSymbol(string) {
                var newString = string;
                var symbols = ["*", "/", "+", "-", "%"];
                if(symbols.includes(newString[0])) {
                    newString = newString.slice(1);
                }
                return newString; 
            }
            function storeAnswer(value) {
                var valued = removeLeadingZero(value); 
                globalAnswer = valued; 
                $("#globalAnswer").html(globalAnswer); 
                return value; 
            }
            function getCurrentValue() {
                var currentValue = document.getElementById("currentValue").innerHTML;
                return currentValue;
            }
            function clearCurrentValue() {
                $("#currentValue").html("0");
                return storeAnswer("0");
            }
            function equals(event) {
                var answer = globalAnswer; 
                var removeEqualsSign = answer.split("=");
                var newAnswer = removeEqualsSign[0];
                newAnswer = replaceTimes(newAnswer);
                newAnswer = removeLeadingSymbol(newAnswer);
                var finalAnswer = eval(newAnswer);
                finalAnswer = finalAnswer.toString(); 
                storeAndReset(finalAnswer, finalAnswer);
                return finalAnswer; 
            }
            function clickButton(event) {
                $(".btn").click(function(event){
                    var thingClicked = this.innerHTML;
                    
                    if($(this).hasClass("orange")) {
                        return addSymbolToAnswer(thingClicked);
                    }
                    if($(this).hasClass("clear")) {
                        return clearCurrentValue(); 
                    }
                    if($(this).hasClass("equals")) {
                        addSymbolToAnswer(thingClicked);
                        return equals(); 
                    }
                    if($(this).hasClass("num")) {
                        return createNewNumber(thingClicked);
                    }
                })
            }clickButton(event);
            function replaceTimes(string) {
                string = string.replace("X", "*");
                return string; 
            }
            function addSymbolToAnswer(string) {
                var symbolString = string;
                symbolString = replaceTimes(string);
                var currentValue = getCurrentValue(); 
                var symbols = ["*", "/", "+", "-", "%"];
                if(globalAnswer === currentValue) {
                    var newGlobalAnswer = currentValue + symbolString; 
                    return storeAndReset(newGlobalAnswer, symbolString);
                }
                if(symbols.includes(currentValue)) {
                    currentValue = currentValue.replace(currentValue, symbolString);
                    var newGlobalAnswer = globalAnswer.slice(0, -1) + currentValue; 
                    return storeAndReset(newGlobalAnswer, symbolString);
                }
                else {
                    currentValue = currentValue + symbolString; 
                    var newGlobalAnswer = globalAnswer + currentValue; 
                    return storeAndReset(newGlobalAnswer, symbolString);
                }
            }
            function storeAndReset(newGlobalAnswer, newCurrentValue) {
                storeAnswer(newGlobalAnswer);
                $("#currentValue").html(newCurrentValue); 
                return newCurrentValue; 
            }
            function createNewNumber(string) {
                var thingClicked = string; 
                var currentValue = getCurrentValue(); 
                var newString = currentValue + thingClicked; 
                newString = removeLeadingZero(newString);
                newString = removeLeadingSymbol(newString);
                $("#currentValue").html(newString);
                return newString; 
            }
        </script> 
    </div>
</body>